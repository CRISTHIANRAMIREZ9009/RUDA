<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <title>FUNCIONARIO (CONTRATO)</title>
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <link rel="StyleSheet" href="css/style.css" type="text/css"></link>
                <link rel="shortcut icon" href="images/iconoRUDA.ico"/>
            </f:facet>
            
        </h:head>

        <h:body>
            
            <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                <h:graphicImage url="images/LogoRUDA.png" width="60%" height="90%" alt="LogoRUDA"  />
            </p:layoutUnit>            

            <p:panel>                
                <p:panelGrid style="width: 100%;"> 
                    <p:row>
                        <p:column style="vertical-align: top; width: 10%;">
                            <h:form>                                
                                <p:menu>
                                    <p:submenu label="Menu">
                                        <p:menuitem value="Personal" url="faces/gestionFuncionarioPersonal.xhtml" />
                                        <p:menuitem value="Cambiar Clave" url="faces/cambiarPasswordFuncionario.xhtml" />
                                        <p:menuitem value="Cerrar Sesión" actionListener="#{sesionVista.cerrarSesion_action}" />
                                    </p:submenu>
                                </p:menu>
                                </h:form> 
                            </p:column>                        
                            <p:column>
                                <h:form id="formulario" enctype="multipart/form-data" acceptcharset="UTF-8"> 
                                    <p:panel id="panelPersonal" header="Personal">
                                        <p:messages id="mensajes" showDetail="true" />
                                        <f:facet name="actions">
                                            <p:commandLink onclick="PF('helpDialog').show();" styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"><h:outputText styleClass="ui-icon ui-icon-help" /></p:commandLink>
                                        </f:facet>
                                        <p:panelGrid>
                                            <p:row>
                                                
                                                <p:column>
                                                    <h:outputText value="Numero:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtNumeroContrato" binding="#{funcionarioContratoVista.txtNumeroContrato}" size="30" />
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Fecha Inicio:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:calendar id="txtFechaInicioContrato" value="#{funcionarioContratoVista.txtFechaInicioContrato}" pattern="yyyy-MM-dd" mask="true" showOn="button" />
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Fecha Fin:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:calendar id="txtFechaFinContrato" value="#{funcionarioContratoVista.txtFechaFinContrato}" pattern="yyyy-MM-dd" mask="true" showOn="button" />
                                                    </div>
                                                </p:column>                                              
                                                                            
                                            </p:row>
                                            
                                            <p:row>
                                                
                                                <p:column>
                                                    <h:outputText value="Numero:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtObjetoContrato" binding="#{funcionarioContratoVista.txtObjetoContrato}" size="30" />
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Estado:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:selectOneMenu id="txtEstadoContrato" value="#{selectOneMenuView.txtEstadoContrato}" style="width:125px">
                                                            <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO" />
                                                            <f:selectItem itemLabel="FINALIZADO" itemValue="FINALIZADO" />
                                                        </p:selectOneMenu>
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Valor Total:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtValorTotalContrato" value="#{funcionarioContratoVista.txtValorTotalContrato}" size="30" />
                                                    </div>
                                                </p:column>                                               
                                                                            
                                            </p:row>
                                            <p:row>
                                                
                                                <p:column>
                                                    <h:outputText value="Numero Compromiso:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtNumeroCompromisoSiContrato" value="#{funcionarioContratoVista.txtNumeroCompromisoSiContrato}" size="30" />
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Forma Pago:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:selectOneMenu id="txtFormaPagoContrato" value="#{selectOneMenuView.txtFormaPagoContrato}" style="width:125px">
                                                            <f:selectItem itemLabel="POR PERIODO (MES)" itemValue="POR PERIODO (MES)" />
                                                            <f:selectItem itemLabel="POR HORA" itemValue="POR HORA" />
                                                        </p:selectOneMenu>
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Numero Cuenta:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtNumeroCuentaContrato" value="#{funcionarioContratoVista.txtNumeroCuentaContrato}" size="30" />
                                                    </div>
                                                </p:column>                                               
                                                                                                
                                            </p:row>

                                            <p:row>
                                                
                                                <p:column>
                                                    <h:outputText value="Tipo Cuenta:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:selectOneMenu id="txtTipoCuentaContrato" value="#{selectOneMenuView.txtTipoCuentaContrato}" style="width:125px">
                                                            <f:selectItem itemLabel="AHORROS" itemValue="AHORROS" />
                                                            <f:selectItem itemLabel="CORRIENTE" itemValue="CORRIENTE" />
                                                        </p:selectOneMenu>
                                                    </div>
                                                </p:column>
                                                
                                                <p:column>
                                                    <h:outputText value="Codigo Banco:"/> 
                                                </p:column>

                                                <p:column>
                                                    <div align="left">
                                                        <p:inputText id="txtCodigoBancoContrato" value="#{funcionarioContratoVista.txtCodigoBancoContrato}" size="30" />
                                                    </div>
                                                </p:column>
                                                
                                            </p:row>
                                            
                                            <p:row>
                                                
                                                <p:column colspan="4">
                                                    <div align="center">

                                                        <p:commandButton value="Registrar" binding="#{funcionarioContratoVista.btnRegistrar}" action="#{funcionarioContratoVista.accion_registrar()}" update="formulario"/>
                                                        <p:commandButton value="Modificar" binding="#{funcionarioContratoVista.btnModificar}" disabled="true"/>
                                                        <p:commandButton value="Limpiar" binding="#{funcionarioContratoVista.btnLimpiar}" disabled="true"/>

                                                    </div>
                                                </p:column>
                                            </p:row>
                                        </p:panelGrid>
                            
                            <h:form id="forma">
                                <p:growl id="growl" showDetail="true" sticky="true"/>
                                <p:panel id="panelUpload" header="Cargar Contrato desde archivo:">
                                    <p:fileUpload label="Seleccionar" invalidFileMessage="!El Archivo deber ser de Extensión .XLS¡" fileUploadListener="#{funcionarioPersonalVista.cargarPersonal}" mode="advanced"  update="mensajeArchivo" auto="false" allowTypes="/(\.|\/)(xls)$/"/> 
                                    <p:messages id="mensajeArchivo" showDetail="true" /> 
                                </p:panel>
                                <br />                    
                            </h:form>
                                        
                        <p:dataTable var="funcionario" value="#{funcionarioContratoVista.listaContratos}" rows="5"
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15"
                                     selectionMode="single"
                                     selection="#{funcionarioContratoVista.selectedContrato}"
                                     rowKey="#{funcionario.numerocontrato}">
                            <p:ajax event="rowSelect" listener="#{funcionarioContratoVista.seleccionar}" update=":formulario" />
                            <p:column headerText="Numero Contrato:">
                                <h:outputText value="#{funcionario.numerocontrato}" />
                            </p:column>
                            <p:column headerText="Documento Coordinador:">
                                <h:outputText value="#{funcionario.documentocoordinadorcontrato.documentocoordinador}" />
                            </p:column>
                            <p:column headerText="Documento Personal:">
                                <h:outputText value="#{funcionario.documentopersonalcontrato.documentopersonal}" />
                            </p:column>
                            <p:column headerText="Estado:">
                                <h:outputText value="#{funcionario.estadocontrato}" />
                            </p:column>

                        </p:dataTable>
                        
                    </p:panel>
          
                                <p:dialog id="modalDialog" header="Ayuda" widgetVar="helpDialog" showEffect="fade" hideEffect="bounce" modal="true" dynamic="true">  
                                    <p align="justify">                       
                                        En esta página usted podrá:<br/><br/>
                                        <b>-Modificar sus datos básicos</b>
                                        Cuando inicia esta página aparece su información personal, aqui podrá modificar su nombre, apellidos, correo y/o teléfono, una vez haga los cambios pertinente de click en el botón modificar.
                                        <br/><br/>
                                        <u>Nota:</u> la clave de acceso no se podrá modificar en ésta página por razones de seguridad sino en la opción <u>Cambio 
                                            Contraseña</u> del menú principal. El coordinador, al momento de registrarlo le asignará una clave de acceso temporal que corresponde a su documento de identificación.
                                        Se le recomienda que luego de ingresar por primera vez al Sistema realice el cambio de contraseña por razones de
                                        seguridad.                     
                                    </p>
                                </p:dialog>
                                
                            </h:form>
                            
                        </p:column>
                        
                    </p:row>
                    
                </p:panelGrid>
                
            </p:panel>
            
            <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                SENA CLEM - REGISTRO UNICO DE DESARROLLO ADMINISTRATIVO
            </p:layoutUnit>

        </h:body>

    </f:view>
</html>

